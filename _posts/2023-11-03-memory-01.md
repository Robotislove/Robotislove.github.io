---
layout: post
title: 存储系统Cache、SRAM、FLASH、EEPROM和DRAM原理解析和实战（上）
date: 2023-11-03
author: lau
tags: [Architecture, Archive]
comments: true
toc: false
pinned: false
---

存储系统Cache、SRAM、FLASH、EEPROM和DRAM原理解析和实战笔记（上）。

<!-- more -->

你说你懂存储系统，我不信。

## 1 前言

在计算机硬件系统中，由不同类型存储器所构成的存储器子系统是整个计算机系统中非常重要的一部分。随着半导体技术的不断发展，存储器子系统中越来越多地采用半导体存储设备来保存程序代码或者处理过程中产生的暂时或者永久数据。本文将系统介绍存储器的分类、SRAM存储器原理、DRAM存储器原理、Flash存储器原理和Cache，以及在嵌入式系统常采用的eeprom，以帮助读者理解和掌握不同类型存储器的工作原理，以及它们在计算机系统中的使用方法。

## 2 存储器分类

一般将存储器分成两类，即易失性存储器和非易失性存储器。

### 2.1 易失性存储器

当给易失性存储器（Volatile Memory）断电时，则会丢失保存在易失性存储器中的数据。然而，它比非易失性存储器速度更快且价格更低。这种类型的存储器主要用作计算机系统的主存储器，因为在关闭计算机时数据将保存在硬盘（固态硬盘或机械硬盘）上。

随机访问存储器（Random Access Memory，RAM）已经成为任何可以执行写入和读取操作的半导体存储器的通用术语，而只读存储器（Read-Only Memory，ROM）只能执行读取操作。

注：许多半导体存储器，而不仅仅是RAM，都具有随机存取/访问特性。

#### 2.1.1 动态随机访问存储器

动态随机访问存储器（Dynamic Random Access Memory，DRAM），它使用由一个MOS场效应晶体管（MOS Field-Effect Transistor，MOSFET）和一个MOS电容构成的金属氧化物半导体（Metal Oxide Semiconductor，MOS）存储器单元来保存一个比特或位。这种类型的RAM最便宜，密度也最高，因此用作计算机中的主存储器。但是，存储单元中用于保存数据的电荷会慢慢泄露，因此必须定期刷新（重写）存储单元，这就需要额外的电路。刷新过程由计算机系统内部自动处理，对使用者是透明的。

1）快速页面模式DRAM

快速页面模式DRAM（Fast Page Mode DRAM，FPM DRAM）是一种比较老的异步DRAM类型，它允许以更快的速度重复访问单个存储器“页面”来改进以前的类型。该类型的存储器在20世纪90年代中期使用。

2）扩展数据输出DRAM

扩展数据输出DRAM（Extend Data Out DRAM，EDO DRAM）是一种较老类型的异步DRAM，其访问时间比早期类型更快，因为它能够在上次访问的数据仍在传输的同时启动新的存储器访问。它在20世纪90年代后期使用。

3）视频随机访问存储器

视频随机访问存储器（Video Random Access Memory，VRAM）是一种较老的双端口存储器，曾用作视频卡的帧缓冲区。

4）同步动态随机存取存储器

同步动态随机存取存储器（Synchronous Dynamic Random Access Memory，SDRAM）。给DRAM添加的电路可以用添加到计算机存储器总线的时钟来同步所有操作。这就允许芯片使用流水线同时处理多个存储器请求，以提高速度。将芯片上的数据进行分组，每个分组可以同时进行存储器操作。到2000年左右，它成为计算机主存储器的主要类型。

（1）双数据率SDRAM（Dual-Data Rate Synchronous Dynamic Random Access Memory，DDR SDRAM）。通过双泵（在时钟脉冲的上升沿和下降沿传输数据），可以在每个时钟周期传输两次数据（两个连续的字）。这个想法的扩展是2012年用于提高存储器访问速率和吞吐量的技术。由于事实证明难以进一步提高存储器芯片的内部时钟速度，因此这些芯片通过在每个时钟周期传输更多的数据字来提高传输速率。例如，DDR2 SDRAM在每个内部时钟周期传输4个连续的字；DDR3 SDRAM在每个内部时钟周期传输8个连续的字；DDR4SDRAM在每个内部时钟周期传输16个连续的字。

（2）Rambus DRAM。Rambus DRAM简称RDRAM，一种替代的双数据率存储器标准，曾用于一些英特尔系统，但最终输给了DDR SDRAM。例如，极限速率DRAM（Extreme Data Rate DRAM，XDR DRAM）。

（3）同步图形RAM。同步图形RAM（Synchronous Graphics RAM，SGRAM）是一种专门为图形适配器制作的SDRAM。它可以执行诸如位屏蔽和块写入等图形的相关操作，并且一次可以打开两页存储器。例如，GDDR SDRAM、GDDR2SDRAM、GDDR3 SDRAM、GDDR4 SDRAM、GDDR5SDRAM、GDDR6 SDRAM。

（4）高带宽存储器（High Bandwidth Memory，HBM）。一种用于图形卡的SDRAM开发，可以以更快的速度传输数据。它由多个堆叠在一起的存储器芯片组成，具有更宽的数据总线。

5）伪静态RAM

伪静态RAM（Pseudo-Static RAM，PSRAM）是一种DRAM，它有在芯片上执行存储器刷新的电路，因此它的作用类似于SRAM，它允许关闭外部存储器控制器以节省能源，用于一些游戏机，如Wii。

#### 2.1.2 静态随机访问存储器

静态随机访问存储器（Static Random Access Memory，SRAM）将每一位二进制数据保存在称为触发器的电路中，该电路由4～6个晶体管构成。与DRAM相比，SRAM的密度更低，每个比特或位的成本更高，但速度更快，不需要存储器刷新操作。它用于处理器芯片中；较小的高速缓存。

#### 2.1.3 内容可寻址存储器

内容可寻址存储器（Content Addressable Memory，CAM）是一种特殊类型存储器，其取代使用地址访问数据，而是应用数据字。如果字保存在存储器中，则返回位置。它主要集成在其他芯片中，如用于高速缓存的位处理器。


### 2.2 非易失性存储器

在给非易失性存储器（Non-Volatile Memory，NVM）断电时，信息仍然保存在该存储器中。因此，它可用作没有磁盘的便携式设备的存储器，或者用作可移动存储卡。非易失性半导体存储器（Non-Volatile Semiconductor Memory，NVSM）将数据保存在浮栅存储单元中，每个单元都由一个浮栅MOSFET组成。

#### 2.2.1 只读存储器

只读存储器（Read-Only Memory，ROM）旨在永久保存数据。在正常的操作过程中只能读取ROM中的内容，而不能写入。它通常用于保存计算机必须立即访问的系统软件，如启动计算机的BIOS程序，以及用于便携式设备和嵌入式计算机（如微控制器）的软件（微码）。

1）掩模编程只读存储器与掩模只读存储器

对于掩模编程只读存储器（Mask Programmed ROM，MPROM）与掩模只读存储器（Mask ROM，MROM）来说，在制造它们时，就将数据编程（写入）到芯片中，因此这种存储器仅用于大批量生产，不能重新写入新的数据。

2）可编程只读存储器

对于可编程只读存储器（Programmable ROM，PROM）来说，在将其装配到电路中之前就将数据写到现有的PROM芯片中，但它只能写入一次。当将PROM芯片插入专用的编程器设备中时，就可以将数据写到PROM中。

3）可擦除可编程只读存储器

对于可擦除可编程只读存储器（Erasable Programmable Read-Only Memory，EPROM）来说，可以从印刷电路板上取下该芯片，然后将其暴露在紫外线下以擦除现有的数据，并将其插入专用的编程器中就可以将新的数据重新写入ERPOM芯片中。EPROM芯片封装的顶部有一个小的透明“窗口”，其允许紫外线照进EPROM芯片。EPROM通常用于原型和小型生产运行设备，该芯片中的程序一般需要在工厂进行更改。

4）电可擦除的可编程只读存储器

电可擦除的可编程只读存储器（Electronically Erasable Programmable Read-Only Memory，EEPROM）可以用电方式重新写入新的数据，而芯片仍然装配在电路板上，但写入的过程很慢。该存储器用于保存固件，即运行硬件设备（如大多数计算机中的BIOS程序）的底层微代码，以方便可以随时对其进行更新。


## 3 非易失性随机访问存储器

非易失性随机访问存储器（Non-Volatile Random Access Memory，NVRAM）的典型代表是铁电随机访问存储器（Ferroelectric Random Access Memory，FRAM/FeRAM），它是一种独立的非易失性存储器，可以在断电时立即捕获和保存关键数据。

## 4 Flash存储器（闪存）

对于这种类型的存储器，写入过程的速度介于EEROM和RAM存储器之间。它可以写入数据，但速度不够快，无法用作计算机的内存/主存。它通常用作硬盘的半导体版本（以前计算机的硬盘采用的是机械硬盘），用于存储文件。它也用于便携式设备，如PDA、USB闪存驱动器，以及用于数码相机和手机的可移动存储卡。

为了方便芯片和嵌入式爱好者和研究者，这里先研究FLASH存储器的设计。
